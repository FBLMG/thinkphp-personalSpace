<include file='Public/header'/>
      <!--sidebar end-->
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
              <!-- page start-->
              <div class="row">
              <!--普通用户添加-->
                  <div class="col-lg-6">
                      <section class="panel">
                          <header class="panel-heading">
                              后台管理者添加
                          </header>
                          <div class="panel-body">
                              <form role="form">
                                  <div class="form-group">
                                      <label for="exampleInputEmail1">用户名</label>
                                      <input type="text" class="form-control" id="adminname" placeholder="用户名" name="adminname">
                                  </div>
                                  <div class="form-group">
                                      <label for="exampleInputPassword1">密码</label>
                                      <input type="password" class="form-control" id="adminpwd" placeholder="密码" name="adminpwd">
                                  </div>
                                  <div class="form-group">
                                      <label for="exampleInputPassword1">重复密码</label>
                                      <input type="password" class="form-control" id="adminpwds" placeholder="密码" name="adminpwds">
                                  </div>
                                  <div class="form-group">
                                      <label for="">联系方式</label>
                                      <input type="text" class="form-control" id="adminphone" placeholder="手机号码" name="adminphone">
                                  </div>
                                  <button type="button" class="btn btn-info" onClick="addadmin()">添加</button>
                              </form>
                          </div>
                      </section>
                  </div>
                <!--普通用户添加-->
                  <div class="col-lg-6">
                      <section class="panel">
                          <header class="panel-heading">
                              普通用户添加
                          </header>
                          <div class="panel-body">
                              <form class="form-horizontal" role="form">
                                  <div class="form-group">
                                      <label for="inputEmail1" class="col-lg-2 control-label">用户名</label>
                                      <div class="col-lg-10">
                                          <input type="text" class="form-control" id="username" placeholder="用户名" name="username">
                                      </div>
                                  </div>
                                  <div class="form-group">
                                      <label for="inputPassword1" class="col-lg-2 control-label">密码</label>
                                      <div class="col-lg-10">
                                          <input type="password" class="form-control" id="userpwd" placeholder="密码" name="userpwd">
                                      </div>
                                  </div>
                                  <div class="form-group">
                                      <label for="inputPassword1" class="col-lg-2 control-label">重复密码</label>
                                      <div class="col-lg-10">
                                          <input type="password" class="form-control" id="userpwds" placeholder="重复密码" name="userpwds">
                                      </div>
                                  </div>
                                  <!---->
                                  <div class="form-group">
                                      <label class="control-label col-lg-2" for="inputSuccess">用户组</label>
                                      <div class="col-lg-10">
                                          <select class="form-control m-bot15" id="groupid" name="groupid">
                                            <volist name="usergroup" id="vo">
                                              <option value="{$vo.id}">{$vo.name}</option>
                                            </volist>
                                          </select>
                                      </div>
                                  </div>
                                  <!---->
                                  <div class="form-group">
                                      <div class="col-lg-offset-2 col-lg-10">
                                          <button type="button" class="btn btn-danger" onClick="adduser()">添加</button>
                                      </div>
                                  </div>
                              </form>
                          </div>
                      </section> 
            </div>
           <!---普通用户添加 -->
              </div>
              <!-- page end-->
          </section>
      </section>
      <!--main content end-->
  </section>

    <!-- js placed at the end of the document so the pages load faster -->
    <script src="__PUBLIC__/admin/js/jquery.js"></script>
    <script src="__PUBLIC__/admin/js/bootstrap.min.js"></script>
    <script src="__PUBLIC__/admin/js/jquery.scrollTo.min.js"></script>
    <script src="__PUBLIC__/admin/js/jquery.nicescroll.js" type="text/javascript"></script>

    <script src="__PUBLIC__/admin/js/jquery-ui-1.9.2.custom.min.js"></script>

    <!--custom switch-->
    <script src="__PUBLIC__/admin/js/bootstrap-switch.js"></script>
    <!--custom tagsinput-->
    <script src="__PUBLIC__/admin/js/jquery.tagsinput.js"></script>
    <!--custom checkbox & radio-->
    <script type="text/javascript" src="__PUBLIC__/admin/js/ga.js"></script>

    <script type="text/javascript" src="__PUBLIC__/admin/assets/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/assets/bootstrap-daterangepicker/date.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/assets/bootstrap-daterangepicker/daterangepicker.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/assets/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
    <script type="text/javascript" src="__PUBLIC__/admin/assets/ckeditor/ckeditor.js"></script>


  <!--common script for all pages-->
    <script src="__PUBLIC__/admin/js/common-scripts.js"></script>

  <!--script for this page-->
  <script src="__PUBLIC__/admin/js/form-component.js"></script>
  <!--弹框样式-->
  <link rel="stylesheet" type="text/css" href="__PUBLIC__/layer/skin/layer.css">
  <script src="__PUBLIC__/layer/layer.js"></script>
  <!--弹框样式-->
  <!-- 密码修改 -->
<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
       <!--  -->
      <section class="panel">
        <header class="panel-heading">
                              密码修改
        </header>
        <div class="panel-body">
          <form class="form-horizontal" role="form">
            <div class="form-group">
              <label for="inputEmail1" class="col-lg-2 control-label">密码</label>
              <div class="col-lg-10">
               <input type="password" class="form-control" id="pwd" name="pwd" placeholder="密码">
              </div>
            </div>
            <div class="form-group">
              <label for="inputPassword1" class="col-lg-2 control-label">重复密码</label>
              <div class="col-lg-10">
                <input type="password" class="form-control" id="pwds" name="pwds" placeholder="重复密码">
              </div>
            </div>
            <div class="form-group">
              <div class="col-lg-offset-2 col-lg-10">
                <button type="button" class="btn btn-danger" onclick="editpwd()">修改</button>
              </div>
            </div>
          </form>
        </div>
      </section>
       <!--  -->
    </div>
  </div>
</div>
<script type="text/javascript">
    function editpwd(){
      var pwd=$('#pwd').val();
      var pwds=$('#pwds').val();
      var ajaxeditpwdUrl='{:U("Index/editpwd")}'; 
      if((pwd=='')||(pwds=='')){
          layer.msg('密码不允许为空');
      }
      if((pwd!='')&&(pwds!='')){
          if(pwd!=pwds){
            layer.msg('两次密码不一致');
          }else{
        /*ajax提交*/
        $.ajax({
      //提交数据的类型 POST GET
        type: "POST",
      //提交的网址
        url: ajaxeditpwdUrl,
      //提交的数据
        data: {pwd:pwd},
      //返回数据的格式
        datatype: "json",
      //成功返回之后调用的函数
        success: function (data) {
      ////根据ajax返回参数判断验证码发送情况
        if(data['status']=="1"){
            layer.msg('修改成功!'); 
            window.location.href="{:U('/Admin/Login/login')}";
        }else{
            layer.msg('没有修改！');   
        }
      ////根据ajax返回参数判断验证码发送情况
        }
     });
        /*ajax提交*/ 
          }
      }
    }
</script>
<!-- 密码修改 -->
  <!-- 管理员添加  -->
  <script type="text/javascript">
    function addadmin(){
		var adminname=$('#adminname').val();
		var adminpwd=$('#adminpwd').val();
		var adminpwds=$('#adminpwds').val();
    var adminphone=$('#adminphone').val();
		var ajaxadminUrl='{:U("User/addadmin")}'; 
		if(adminname==''){
			layer.msg('用户名不允许为空');
			return false;
		}
		if(adminpwd==''){
			layer.msg('密码不允许为空');
			return false;
		}
		if(adminpwds==''){
			layer.msg('重复密码不允许为空');
			return false;
		}
		if((adminpwd!='')&&(adminpwds!='')){
			if(adminpwd!=adminpwds){
				layer.msg('两次密码不相同');
			    return false;
			}
		}
    if(adminphone==''){
      layer.msg('手机号码不允许为空');
      return false;
    }else{
      var reg=/^(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;
      isok= reg.test(adminphone);
      if (!isok) {
        layer.msg('请输入正确的手机号!');        
        return false;
      }
    }
    // <!-- ajax提交 -->
	    $.ajax({
      //提交数据的类型 POST GET
        type: "POST",
      //提交的网址
        url: ajaxadminUrl,
      //提交的数据
        data: {adminname: adminname,adminpwd:adminpwd,adminphone:adminphone},
      //返回数据的格式
        datatype: "json",
      //成功返回之后调用的函数
        success: function (data) {
      ////根据ajax返回参数判断验证码发送情况
        if(data['status']=="1"){
            layer.msg('添加成功!'); 
			window.location.reload();
        }else if(data['status']=="-1"){
            layer.msg('已存在该用户名!');           
        }else if(data['status']=="-3"){
            layer.msg('已存在该手机号!');           
        }else{
            layer.msg('未知错误!');   
        }
      ////根据ajax返回参数判断验证码发送情况
        }
     });
	// <!--ajax提交-->
	}
  </script>
  <!-- 管理员添加   -->
  <!-- 普通用户添加-->
  <script type="text/javascript">
      function adduser(){
		var username=$('#username').val();
		var userpwd=$('#userpwd').val();
		var userpwds=$('#userpwds').val();
		var groupid=$('#groupid').val();
		var ajaxuserUrl='{:U("User/adduser")}';
		if(username==''){
			layer.msg('用户名不允许为空');
			return false;
		}
		if(userpwd==''){
			layer.msg('密码不允许为空');
			return false;
		}
		if(userpwds==''){
			layer.msg('重复密码不允许为空');
			return false;
		}
		if((userpwd!='')&&(userpwds!='')){
			if(userpwd!=userpwds){
				layer.msg('两次密码不相同');
			    return false;
			}
		}
		<!--ajax提交-->
	    $.ajax({
      //提交数据的类型 POST GET
        type: "POST",
      //提交的网址
        url: ajaxuserUrl,
      //提交的数据
        data: {username: username,userpwd:userpwd,groupid:groupid},
      //返回数据的格式
        datatype: "json",
      //成功返回之后调用的函数
        success: function (data) {
      ////根据ajax返回参数判断验证码发送情况
        if(data['status']=="1"){
            layer.msg('添加成功!'); 
			window.location.reload();
        }else if(data['status']=="-1"){
            layer.msg('已存在该用户名!');           
        }else{
            layer.msg('未知错误!');   
        }
      ////根据ajax返回参数判断验证码发送情况
        }
     });
	<!--ajax提交-->
	}
  </script>
  <!-- 普通用户添加-->
  </body>
</html>
